import java.util.*;public class Main {    public static void main(String[] args) {        Scanner sc = new Scanner(System.in);        long N = sc.nextLong();        long X = sc.nextLong();        String S = sc.next();        long max = 1;        for(int i=0;i<18;i++) max*=10;        int cnt  = 0;        for(int i=0;i<N;i++){            char s = S.charAt(i);            if(s=='U'){                if(cnt>0) cnt--;                else if(X%2==0) X = X/2;                else X = (X-1)/2;            }            else if(s=='L'){                if(cnt>0) cnt++;                else if(X*2>max) cnt=1;                else X = X*2;            }            else{                if(cnt>0) cnt++;                else if(X*2>max) cnt=1;                else X = X*2+1;            }        }        System.out.println(X);    }}